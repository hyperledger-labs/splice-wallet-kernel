{
    "openrpc": "1.2.6",
    "info": {
        "title": "Splice Wallet JSON-RPC dApp API",
        "version": "0.5.0",
        "description": "An OpenRPC specification for the dapp to interact with a Wallet Provider."
    },
    "methods": [
        {
            "name": "status",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/StatusEvent"
                }
            },
            "description": "Returns the current status of the wallet provider session."
        },
        {
            "name": "connect",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/ConnectResult"
                }
            },
            "description": "Ensures ledger connectivity and returns the connected network information along with the session information."
        },
        {
            "name": "disconnect",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/Null"
                }
            },
            "description": "Invoke a disconnect of the wallet provider session."
        },
        {
            "name": "getActiveNetwork",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/Network"
                }
            },
            "description": "Returns the active network."
        },
        {
            "name": "prepareExecute",
            "params": [
                {
                    "name": "params",
                    "schema": {
                        "title": "prepareExecuteParams",
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/JsPrepareSubmissionRequest"
                    }
                }
            ],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/Null"
                }
            },
            "description": "Prepares a transaction for subsequent signing & execution."
        },
        {
            "name": "prepareExecuteAndWait",
            "params": [
                {
                    "name": "params",
                    "schema": {
                        "title": "prepareExecuteParams",
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/JsPrepareSubmissionRequest"
                    }
                }
            ],
            "result": {
                "name": "result",
                "schema": {
                    "title": "prepareExecuteAndWaitResult",
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "tx": {
                            "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedExecutedEvent"
                        }
                    },
                    "required": ["tx"]
                }
            },
            "description": "Like prepareExecute, but waits for the transaction to be executed on the ledger."
        },
        {
            "name": "signMessage",
            "params": [
                {
                    "name": "params",
                    "schema": {
                        "title": "signMessageParams",
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/SignMessageRequest"
                    }
                }
            ],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/SignMessageResult"
                }
            },
            "description": "Signs a message."
        },
        {
            "name": "ledgerApi",
            "params": [
                {
                    "name": "params",
                    "schema": {
                        "title": "ledgerApiParams",
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/LedgerApiRequest"
                    }
                }
            ],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/LedgerApiResult"
                }
            },
            "description": "Proxy for the JSON-API endpoints. Injects authorization headers automatically."
        },
        {
            "name": "accountsChanged",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/AccountsChangedEvent"
                }
            }
        },
        {
            "name": "getPrimaryAccount",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-user-api.json#/components/schemas/Wallet"
                }
            },
            "description": "Returns the primary account."
        },
        {
            "name": "listAccounts",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/ListAccountsResult"
                }
            },
            "description": "Lists the addresses (wallets) with their properties; including which network they are associated to and with signing provider is used."
        },
        {
            "name": "txChanged",
            "params": [],
            "result": {
                "name": "result",
                "schema": {
                    "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedEvent"
                }
            }
        }
    ],
    "components": {
        "schemas": {
            "Null": {
                "title": "Null",
                "type": "null",
                "description": "Represents a null value, used in responses where no data is returned."
            },
            "Provider": {
                "title": "Provider",
                "type": "object",
                "description": "Represents a Provider.",
                "additionalProperties": false,
                "properties": {
                    "id": {
                        "title": "id",
                        "type": "string",
                        "description": "The unique identifier of the Provider."
                    },
                    "version": {
                        "title": "version",
                        "type": "string",
                        "description": "The version of the Provider."
                    },
                    "providerType": {
                        "title": "providerType",
                        "type": "string",
                        "enum": ["browser", "desktop", "mobile", "remote"],
                        "description": "The type of client that implements the Provider."
                    },
                    "url": {
                        "title": "url",
                        "type": "string",
                        "description": "The URL of the Wallet Provider."
                    },
                    "userUrl": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/UserUrl"
                    }
                },
                "required": ["id", "clientType"]
            },
            "LedgerApiResult": {
                "title": "LedgerApiResult",
                "type": "object",
                "description": "Ledger Api configuration options",
                "additionalProperties": false,
                "properties": {
                    "response": {
                        "title": "response",
                        "type": "string"
                    }
                },
                "required": ["response"]
            },
            "UserUrl": {
                "title": "UserUrl",
                "type": "string",
                "format": "uri",
                "description": "A URL that points to a user interface."
            },
            "JsPrepareSubmissionRequest": {
                "title": "JsPrepareSubmissionRequest",
                "type": "object",
                "description": "Structure representing the request for prepare and execute calls",
                "additionalProperties": false,
                "properties": {
                    "commandId": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/CommandId"
                    },
                    "commands": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/JsCommands"
                    },
                    "actAs": {
                        "title": "actAs",
                        "type": "array",
                        "description": "Set of parties on whose behalf the command should be executed, if submitted. If not set, the primary wallet's party is used.",
                        "items": {
                            "title": "party",
                            "type": "string"
                        }
                    },
                    "readAs": {
                        "title": "readAs",
                        "type": "array",
                        "description": "Set of parties that should be granted read access to the command, if submitted. If not set, no additional read parties are granted.",
                        "items": {
                            "title": "party",
                            "type": "string"
                        }
                    },
                    "disclosedContracts": {
                        "title": "disclosedContracts",
                        "type": "array",
                        "description": "List of contract IDs to be disclosed with the command.",
                        "items": {
                            "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/DisclosedContract"
                        }
                    },
                    "synchronizerId": {
                        "title": "synchronizerId",
                        "type": "string",
                        "description": "If not set, a suitable synchronizer that this node is connected to will be chosen."
                    },
                    "packageIdSelectionPreference": {
                        "title": "packageIdSelectionPreference",
                        "type": "array",
                        "description": "The package-id selection preference of the client for resolving package names and interface instances in command submission and interpretation",
                        "items": {
                            "title": "packageId",
                            "type": "string"
                        }
                    }
                },
                "required": ["commands"]
            },
            "DisclosedContract": {
                "title": "DisclosedContract",
                "type": "object",
                "description": "Structure representing a disclosed contract for transaction execution",
                "additionalProperties": false,
                "properties": {
                    "templateId": {
                        "title": "templateId",
                        "type": "string",
                        "description": "The template identifier of the disclosed contract."
                    },
                    "contractId": {
                        "title": "contractId",
                        "type": "string",
                        "description": "The unique identifier of the disclosed contract."
                    },
                    "createdEventBlob": {
                        "title": "createdEventBlob",
                        "type": "string",
                        "description": "The blob data of the created event for the disclosed contract."
                    },
                    "synchronizerId": {
                        "title": "synchronizerId",
                        "type": "string",
                        "description": "The synchronizer identifier associated with the disclosed contract."
                    }
                },
                "required": ["createdEventBlob"]
            },
            "JsCommands": {
                "title": "JsCommands",
                "type": "object",
                "description": "Structure representing JS commands for transaction execution",
                "additionalProperties": true
            },
            "JsPrepareSubmissionResponse": {
                "title": "JsPrepareSubmissionResponse",
                "type": "object",
                "description": "Structure representing the result of a prepareReturn call",
                "additionalProperties": false,
                "properties": {
                    "preparedTransaction": {
                        "title": "preparedTransaction",
                        "type": "string",
                        "description": "The prepared transaction data."
                    },
                    "preparedTransactionHash": {
                        "title": "preparedTransactionHash",
                        "type": "string",
                        "description": "The hash of the prepared transaction."
                    }
                }
            },
            "LedgerApiRequest": {
                "title": "LedgerApiRequest",
                "type": "object",
                "description": "Ledger API request structure",
                "additionalProperties": false,
                "properties": {
                    "requestMethod": {
                        "title": "requestMethod",
                        "type": "string",
                        "enum": ["GET", "POST", "PUT", "DELETE"]
                    },
                    "resource": {
                        "title": "resource",
                        "type": "string"
                    },
                    "body": {
                        "title": "body",
                        "type": "string"
                    }
                },
                "required": ["requestMethod", "resource"]
            },
            "AccountsChangedEvent": {
                "title": "AccountsChangedEvent",
                "type": "array",
                "description": "Event emitted when the user's accounts change.",
                "items": {
                    "$ref": "api-specs/openrpc-user-api.json#/components/schemas/Wallet"
                }
            },
            "ListAccountsResult": {
                "title": "ListAccountsResult",
                "type": "array",
                "description": "An array of accounts that the user has authorized the dapp to access..",
                "items": {
                    "$ref": "api-specs/openrpc-user-api.json#/components/schemas/Wallet"
                }
            },
            "CommandId": {
                "title": "CommandId",
                "type": "string",
                "description": "The unique identifier of the command associated with the transaction."
            },
            "TxChangedPendingEvent": {
                "title": "TxChangedPendingEvent",
                "description": "Event emitted when a transaction is pending.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "status": {
                        "title": "statusPending",
                        "type": "string",
                        "enum": ["pending"],
                        "description": "The status of the transaction."
                    },
                    "commandId": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/CommandId"
                    }
                },
                "required": ["status", "commandId"]
            },
            "TxChangedSignedPayload": {
                "type": "object",
                "title": "TxChangedSignedPayload",
                "description": "Payload for the TxChangedSignedEvent.",
                "additionalProperties": false,
                "properties": {
                    "signature": {
                        "title": "signature",
                        "type": "string",
                        "description": "The signature of the transaction."
                    },
                    "signedBy": {
                        "title": "signedBy",
                        "type": "string",
                        "description": "The identifier of the provider that signed the transaction."
                    },
                    "party": {
                        "title": "party",
                        "type": "string",
                        "description": "The party that signed the transaction."
                    }
                },
                "required": ["signature", "signedBy", "party"]
            },
            "TxChangedSignedEvent": {
                "title": "TxChangedSignedEvent",
                "description": "Event emitted when a transaction has been signed.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "status": {
                        "title": "statusSigned",
                        "type": "string",
                        "enum": ["signed"],
                        "description": "The status of the transaction."
                    },
                    "commandId": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/CommandId"
                    },
                    "payload": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedSignedPayload"
                    }
                },
                "required": ["status", "commandId", "payload"]
            },
            "TxChangedExecutedPayload": {
                "type": "object",
                "title": "TxChangedExecutedPayload",
                "description": "Payload for the TxChangedExecutedEvent.",
                "additionalProperties": false,
                "properties": {
                    "updateId": {
                        "title": "updateId",
                        "type": "string",
                        "description": "The update ID corresponding to the transaction."
                    },
                    "completionOffset": {
                        "title": "completionOffset",
                        "type": "integer"
                    }
                },
                "required": ["updateId", "completionOffset"]
            },
            "TxChangedExecutedEvent": {
                "title": "TxChangedExecutedEvent",
                "description": "Event emitted when a transaction is executed against the participant.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "status": {
                        "title": "statusExecuted",
                        "type": "string",
                        "enum": ["executed"],
                        "description": "The status of the transaction."
                    },
                    "commandId": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/CommandId"
                    },
                    "payload": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedExecutedPayload"
                    }
                },
                "required": ["status", "commandId", "payload"]
            },
            "TxChangedFailedEvent": {
                "title": "TxChangedFailedEvent",
                "description": "Event emitted when a transaction has failed.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "status": {
                        "title": "statusFailed",
                        "type": "string",
                        "enum": ["failed"],
                        "description": "The status of the transaction."
                    },
                    "commandId": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/CommandId"
                    }
                },
                "required": ["status", "commandId"]
            },
            "TxChangedEvent": {
                "title": "TxChangedEvent",
                "description": "Event emitted when a transaction changes.",
                "oneOf": [
                    {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedPendingEvent"
                    },
                    {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedSignedEvent"
                    },
                    {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedExecutedEvent"
                    },
                    {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/TxChangedFailedEvent"
                    }
                ]
            },
            "ConnectResult": {
                "title": "ConnectResult",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "isConnected": {
                        "title": "isConnected",
                        "type": "boolean",
                        "description": "Whether or not the user is authenticated with the Wallet."
                    },
                    "reason": {
                        "title": "reason",
                        "type": "string",
                        "description": "The reason why the user is not connected to the Wallet."
                    },
                    "isNetworkConnected": {
                        "title": "isNetworkConnected",
                        "type": "boolean",
                        "description": "Whether or not a connection to a network is established."
                    },
                    "networkReason": {
                        "title": "networkReason",
                        "type": "string",
                        "description": "If not connected to a network, the reason why."
                    },
                    "userUrl": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/UserUrl"
                    }
                },
                "required": ["isConnected", "isNetworkConnected"]
            },
            "StatusEvent": {
                "title": "StatusEvent",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "provider": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/Provider"
                    },
                    "connection": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/ConnectResult"
                    },
                    "network": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/Network"
                    },
                    "session": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/Session"
                    }
                },
                "required": ["provider", "connection"]
            },
            "SignMessageRequest": {
                "title": "SignMessageRequest",
                "type": "object",
                "description": "Request to sign a message.",
                "additionalProperties": false,
                "properties": {
                    "message": {
                        "title": "message",
                        "type": "string",
                        "description": "The message to sign."
                    }
                },
                "required": ["message"]
            },
            "SignMessageResult": {
                "title": "SignMessageResult",
                "type": "object",
                "additionalProperties": false,
                "description": "Result of signing a message.",
                "properties": {
                    "signature": {
                        "title": "signature",
                        "type": "string",
                        "description": "The signature of the message."
                    }
                },
                "required": ["signature"]
            },
            "Network": {
                "title": "network",
                "type": "object",
                "description": "Network information, if connected to a network.",
                "additionalProperties": false,
                "properties": {
                    "networkId": {
                        "title": "networkId",
                        "type": "string",
                        "description": "A CAIP-2 compliant chain ID, e.g. 'canton:da-mainnet'."
                    },
                    "ledgerApi": {
                        "title": "ledgerApiUrl",
                        "type": "string",
                        "description": "The base URL of the ledger API.",
                        "format": "uri"
                    },
                    "accessToken": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/AccessToken"
                    }
                },
                "required": ["networkId"]
            },
            "AccessToken": {
                "title": "accessToken",
                "type": "string",
                "description": "JWT authentication token."
            },
            "Session": {
                "title": "session",
                "type": "object",
                "description": "Session information, if authenticated.",
                "additionalProperties": false,
                "properties": {
                    "accessToken": {
                        "$ref": "api-specs/openrpc-dapp-api.json#/components/schemas/AccessToken"
                    },
                    "userId": {
                        "title": "userId",
                        "type": "string",
                        "description": "The user identifier."
                    }
                },
                "required": ["accessToken", "userId"]
            }
        }
    }
}
